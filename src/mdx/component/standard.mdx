---
name: 3. 自定义组件
route: /component/standard
menu: 3. 表单组件
---

import { Playground } from 'docz'
import react from 'react';
import { Select, Input, Radio, Button, Switch } from 'nowrapper/lib/antd';
import ReactJson from 'react-json-view'
import Form, { FormItem, FormCore, If } from 'noform';
import 'antd/dist/antd.css';
import 'noform/dist/index.css';
import 'nowrapper/dist/antd/index.css';

# 自定义组件

## 编写受控组件

简单来说就是实现 `value/onChange` 的组件，示例代码如下：

```jsx
class Input extends React.Component {
    constructor(props) {
        super(props);
        this.state = { value: '' };
    }
    componentWillReceiveProps = (nextProps) => {
        if (nextProps.value !== this.state.value) {
            this.setState({ value: nextProps.value });
        }
    }
    onChange = (e) => {
        this.props.onChange && this.props.onChange(e.target.value); // 在这里可以做一些value的调整
    }
    render() {
        return <input value={this.state.value} onChange={this.onChange} />
    }
}
```

## 实现状态标准

实现了**受控逻辑**以及**状态管理**的组件，即可视为是简单的 **wrapper** 组件。

这里的`status` 会由 **FormItem** 或 **Item** 根据**FormCore**状态控制传入。

```jsx
const CustomElement = (props) => {
    const returnEle = '';
    const { status } = props;
    switch (status) {
        case 'edit': returnEle = 'Edit'; break;
        case 'preview': returnEle = 'Preview'; break;
        case 'disabled': returnEle = 'Disabled'; break;
    }

    return <div>{returnEle}</div>
}
```

