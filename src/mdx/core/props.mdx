---
name: 属性控制
route: /core/props
menu: FormCore 表单核心
order: 4
menuOrder: 2
---

import { Playground } from 'docz'
import react from 'react';
import { Select, Input, Radio, Button } from 'nowrapper/lib/antd';
import Form, { FormItem, FormCore } from 'noform';
import 'antd/dist/antd.css';
import 'noform/dist/index.css';
import 'nowrapper/dist/antd/index.css';

# 属性控制

通过以下方法可以控制表单组件的状态：

* 单个组件属性设置 **setItemProps** (fieldName: `string`, status: `edit` | `preview` | `disabled`)
* 批量组件属性设置 **setProps** (obj: { [fieldName]: `string`, [status]: `edit` | `preview` | `disabled` })
* 同样的，以上的API都有get版本: **getItemProps** , **getProps**

## 单个组件属性设置

通过 **core.setItemProps()** 可以给单独组件赋props属性

<Playground>
    {
        () => {
            const core = new FormCore(); // 初始化核心
            return <Form core={core}>
                <div style={{ color: '#999' }}>点击一次改变属性，再点一次清空改变</div>
                <FormItem label="setItemProps(text1)" render={() => {
                    return <div>                        
                        <Button onClick={() => {
                            const { placeholder } = core.getItemProps('text1');
                            core.setItemProps('text1', { placeholder: placeholder ? '' : '变更placeholder' });
                        }}>placeholder</Button>

                        <Button style={{ marginLeft: '8px' }} onClick={() => {
                            const { options = [] } = core.getItemProps('text1');
                            const dataSource = [{ label: 'a', value: 'a' }, { label: 'b', value: 'b' }];
                            core.setItemProps('text1', { options: options.length > 0 ? [] : dataSource });
                        }}>options</Button>

                        <Radio.Group style={{ marginLeft: '8px' }} defaultValue="default" onChange={(e) => {
                            core.setItemProps('text1', { size: e.target.value });
                        }}>
                            <Radio.Button value="small">小</Radio.Button>
                            <Radio.Button value="default">中</Radio.Button>
                            <Radio.Button value="large">大</Radio.Button>
                        </Radio.Group>
                    </div>
                }} />
                <FormItem label="字段1" name="text1">
                    <Select />
                </FormItem>
            </Form>
        }
    }
</Playground>

## 单个组件属性设置(FormItem应用)

更常使用场景的场景是配合 **FormItem** 

<Playground>
    {
        () => {
            const core = new FormCore(); // 初始化核心

            return <Form core={core}>
                <div style={{ color: '#999' }}>点击一次改变属性，再点一次清空改变</div>
                <FormItem label="setItemProps(text1)" render={() => {
                    return <div>                        
                        <Button onClick={() => {
                            const { prefix } = core.getItemProps('text1');
                            core.setItemProps('text1', { prefix: prefix ? '' : '设置prefix' });
                        }}>prefix</Button>

                        <Button style={{ marginLeft: '8px' }} onClick={() => {
                            const { suffix } = core.getItemProps('text1');
                            core.setItemProps('text1', { suffix: suffix ? '' : '设置suffix' });
                        }}>suffix</Button>

                        <Button style={{ marginLeft: '8px' }} onClick={() => {
                            const { top } = core.getItemProps('text1');
                            core.setItemProps('text1', { top: top ? '' : '设置top' });
                        }}>top</Button>

                        <Button style={{ marginLeft: '8px' }} onClick={() => {
                            const { help } = core.getItemProps('text1');
                            core.setItemProps('text1', { help: help ? '' : '设置help' });
                        }}>help</Button>
                    </div>
                }} />
                <FormItem label="字段1" name="text1">
                    <Select />
                </FormItem>
            </Form>
        }
    }
</Playground>

## 批量组件属性设置

通过 **core.setProps()** 可以切换多个表单组件的状态，以下的例子会设置字段1的 `prefix` 和 `suffix`


<Playground>
    {
        () => {
            const core = new FormCore(); // 初始化核心
            return <Form core={core}>
                <FormItem label="setProps" render={() => {
                    return <div>
                        <Button onClick={() => {
                            core.setProps({
                                text1: { prefix: 'prefix1' },
                                text2: { suffix: 'suffix2' },
                            });
                        }}>setProps</Button>   

                        <Button style={{ marginLeft: '8px' }} onClick={() => {
                            core.setProps({
                                text1: { prefix: null },
                                text2: { suffix: null },
                            });
                        }}>重置</Button>                        
                    </div>
                }} />
                <FormItem label="字段1" name="text1" defaultValue="text1">
                    <Input />
                </FormItem>
                <FormItem label="字段2" name="text2" defaultValue="text2">
                    <Input />
                </FormItem>
            </Form>
        }
    }
</Playground>

