---
name: 状态控制
route: /core/status
menu: FormCore 表单核心
order: 3
menuOrder: 2
---

import { Playground } from 'docz'
import react from 'react';
import { Input, Radio, Button } from 'nowrapper/lib/antd';
import Form, { FormItem, FormCore } from 'noform';
import 'antd/dist/antd.css';
import 'noform/dist/index.css';
import 'nowrapper/dist/antd/index.css';

# 状态控制

通过以下方法可以控制表单组件的状态：

* 全局组件状态切换 **setGlobalStatus** (status: `edit` | `preview` | `disabled`)
* 单个组件状态切换 **setItemStatus** (fieldName: `string`, status: `edit` | `preview` | `disabled`)
* 批量组件状态切换 **setStatus** (obj: { [fieldName]: `string`, [status]: `edit` | `preview` | `disabled` })
* 同样的，以上的API都有get版本: **getGlobalStatus** , **getItemStatus** , **getStatus**

## 全局组件状态切换

通过 **core.setGlobalStatus()** 可以切换所有表单组件的状态，可选值有 `edit` | `preview` | `disabled`

<Playground>
    {
        () => {
            const core = new FormCore(); // 初始化核心
            const statusHandler = (e) => core.setGlobalStatus(e.target.value); // 切换全局状态

            return <Form core={core}>
                <FormItem label="setGlobalStatus" render={() => {
                    return <Radio.Group defaultValue="edit" onChange={statusHandler}>
                        <Radio.Button value="edit">编辑</Radio.Button>
                        <Radio.Button value="preview">预览</Radio.Button>
                        <Radio.Button value="disabled">禁用</Radio.Button>
                    </Radio.Group>
                }} />
                <FormItem label="字段1" name="text1" defaultValue="text1">
                    <Input />
                </FormItem>
                <FormItem label="字段2" name="text2" defaultValue="text2">
                    <Input />
                </FormItem>
            </Form>
        }
    }
</Playground>

## 单个组件状态切换

通过 **core.setItemStatus()** 可以切换单个表单组件的状态，可选值有 `edit` | `preview` | `disabled`


<Playground>
    {
        () => {
            const core = new FormCore(); // 初始化核心
            return <Form core={core}>
                <FormItem label="setItemStatus(text1)" render={() => {
                    return <Radio.Group defaultValue="edit" onChange={(e) => 
                        core.setItemStatus('text1', e.target.value)
                    }>
                        <Radio.Button value="edit">编辑</Radio.Button>
                        <Radio.Button value="preview">预览</Radio.Button>
                        <Radio.Button value="disabled">禁用</Radio.Button>
                    </Radio.Group>
                }} />
                <FormItem label="setItemStatus(text2)" render={() => {
                    return <Radio.Group defaultValue="edit" onChange={(e) => 
                        core.setItemStatus('text2', e.target.value)
                    }>
                        <Radio.Button value="edit">编辑</Radio.Button>
                        <Radio.Button value="preview">预览</Radio.Button>
                        <Radio.Button value="disabled">禁用</Radio.Button>
                    </Radio.Group>
                }} />
                <FormItem label="字段1" name="text1" defaultValue="text1">
                    <Input />
                </FormItem>
                <FormItem label="字段2" name="text2" defaultValue="text2">
                    <Input />
                </FormItem>
            </Form>
        }
    }
</Playground>

## 批量组件状态切换

通过 **core.setStatus()** 可以切换多个表单组件的状态，以下的例子会设置字段1为`preview`, 字段2为`disabled`


<Playground>
    {
        () => {
            const core = new FormCore(); // 初始化核心
            return <Form core={core}>
                <FormItem label="setStatus(text1)" render={() => {
                    return <div>
                        <Button onClick={() => {
                            core.setStatus({
                                text1: 'preview',
                                text2: 'disabled',
                            });
                        }}>setStatus</Button>

                        <Button style={{ marginLeft: '8px' }} onClick={() => {
                            core.setStatus({
                                text1: 'edit',
                                text2: 'edit',
                            });
                        }}>重置</Button>
                    </div>
                }} />
                <FormItem label="字段1" name="text1" defaultValue="text1">
                    <Input />
                </FormItem>
                <FormItem label="字段2" name="text2" defaultValue="text2">
                    <Input />
                </FormItem>
            </Form>
        }
    }
</Playground>

